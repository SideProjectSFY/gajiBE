FROM eclipse-temurin:17-jdk
WORKDIR /app

# Copy Gradle wrapper and configuration files from backend directory
COPY backend/build.gradle backend/settings.gradle backend/gradlew ./
COPY backend/gradle ./gradle

# Download dependencies (cached layer)
RUN ./gradlew dependencies --no-daemon

# Copy source code from backend directory
COPY backend/src ./src

# Run Spring Boot with DevTools
CMD ["./gradlew", "bootRun", "--no-daemon"]
